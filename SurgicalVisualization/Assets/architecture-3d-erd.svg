<?xml version="1.0" encoding="UTF-8"?>
<svg width="1200" height="720" viewBox="0 0 1200 720" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="bg" x1="0" y1="0" x2="1" y2="0">
      <stop offset="0" stop-color="#0b1220"/>
      <stop offset="1" stop-color="#152238"/>
    </linearGradient>
    <linearGradient id="card" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0" stop-color="#111a2e"/>
      <stop offset="1" stop-color="#0f172a"/>
    </linearGradient>
    <linearGradient id="edge" x1="0" y1="0" x2="1" y2="0">
      <stop offset="0" stop-color="#38bdf8"/>
      <stop offset="1" stop-color="#22d3ee"/>
    </linearGradient>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="6" stdDeviation="8" flood-color="#000" flood-opacity="0.35"/>
    </filter>
    <style>
      .title { font-family: Segoe UI, Arial, sans-serif; font-size: 28px; fill: #e2e8f0; font-weight: 600; }
      .sub { font-family: Segoe UI, Arial, sans-serif; font-size: 14px; fill: #94a3b8; }
      .h { font-family: Segoe UI, Arial, sans-serif; font-size: 16px; fill: #f1f5f9; font-weight: 600; }
      .t { font-family: Segoe UI, Arial, sans-serif; font-size: 13px; fill: #cbd5e1; }
      .pill { fill: #0b1220; stroke: #334155; stroke-width: 1; }
      .line { stroke: url(#edge); stroke-width: 3; opacity: 0.55; }
      .line2 { stroke: #94a3b8; stroke-width: 2; opacity: 0.35; stroke-dasharray: 6 6; }
    </style>
  </defs>

  <rect x="0" y="0" width="1200" height="720" fill="url(#bg)"/>

  <text x="60" y="70" class="title">SurgicalVisualization — 3D Architecture Map</text>
  <text x="60" y="98" class="sub">Desktop (WPF + HelixToolkit) • Browser (Three.js) • Deterministic Metrics • Audit Logging</text>

  <!-- Isometric-ish cards -->
  <!-- Helper: draw a pseudo-3D card with top face -->
  <g filter="url(#shadow)">
    <!-- Desktop UI -->
    <g transform="translate(90,160)">
      <polygon points="0,20 320,20 350,0 30,0" fill="#0b1220" opacity="0.7"/>
      <rect x="0" y="20" width="320" height="170" rx="16" fill="url(#card)" stroke="#334155" stroke-width="2"/>
      <text x="20" y="55" class="h">Desktop UI</text>
      <text x="20" y="82" class="t">MainWindow • HelixViewport3D</text>
      <text x="20" y="106" class="t">Camera Controls • Telemetry</text>
      <rect x="20" y="125" width="120" height="26" rx="13" class="pill"/>
      <text x="34" y="143" class="sub">MVVM Bindings</text>
    </g>

    <!-- ViewModel Orchestrator -->
    <g transform="translate(460,140)">
      <polygon points="0,20 340,20 370,0 30,0" fill="#0b1220" opacity="0.7"/>
      <rect x="0" y="20" width="340" height="200" rx="16" fill="url(#card)" stroke="#334155" stroke-width="2"/>
      <text x="20" y="55" class="h">MainViewModel</text>
      <text x="20" y="82" class="t">Orchestrates Loading • Metrics • Logging</text>
      <text x="20" y="106" class="t">Commands • State • UI Updates</text>
      <rect x="20" y="130" width="150" height="26" rx="13" class="pill"/>
      <text x="34" y="148" class="sub">Deterministic Flow</text>
      <rect x="20" y="162" width="170" height="26" rx="13" class="pill"/>
      <text x="34" y="180" class="sub">Audit Logging</text>
    </g>

    <!-- ModelLoader (STA) -->
    <g transform="translate(460,390)">
      <polygon points="0,20 340,20 370,0 30,0" fill="#0b1220" opacity="0.7"/>
      <rect x="0" y="20" width="340" height="190" rx="16" fill="url(#card)" stroke="#334155" stroke-width="2"/>
      <text x="20" y="55" class="h">ModelLoader (STA Thread)</text>
      <text x="20" y="82" class="t">STL/OBJ Parse • Model3DGroup Build</text>
      <text x="20" y="106" class="t">Deep-Freeze Geometry for UI Safety</text>
      <rect x="20" y="130" width="145" height="26" rx="13" class="pill"/>
      <text x="34" y="148" class="sub">Thread Isolation</text>
      <rect x="20" y="162" width="135" height="26" rx="13" class="pill"/>
      <text x="34" y="180" class="sub">Freeze()</text>
    </g>

    <!-- PrecisionMathService -->
    <g transform="translate(860,390)">
      <polygon points="0,20 260,20 290,0 30,0" fill="#0b1220" opacity="0.7"/>
      <rect x="0" y="20" width="260" height="190" rx="16" fill="url(#card)" stroke="#334155" stroke-width="2"/>
      <text x="20" y="55" class="h">PrecisionMathService</text>
      <text x="20" y="82" class="t">Triangle Count • BBox • COM</text>
      <text x="20" y="106" class="t">Quaternion Alignment Math</text>
      <rect x="20" y="130" width="170" height="26" rx="13" class="pill"/>
      <text x="34" y="148" class="sub">double precision</text>
    </g>

    <!-- Logger -->
    <g transform="translate(860,160)">
      <polygon points="0,20 260,20 290,0 30,0" fill="#0b1220" opacity="0.7"/>
      <rect x="0" y="20" width="260" height="170" rx="16" fill="url(#card)" stroke="#334155" stroke-width="2"/>
      <text x="20" y="55" class="h">LoggerService</text>
      <text x="20" y="82" class="t">UTC ISO-8601 • Invariant Culture</text>
      <text x="20" y="106" class="t">Append-only Trace</text>
      <rect x="20" y="125" width="170" height="26" rx="13" class="pill"/>
      <text x="34" y="143" class="sub">system_log.txt</text>
    </g>

    <!-- Browser Viewer -->
    <g transform="translate(90,420)">
      <polygon points="0,20 320,20 350,0 30,0" fill="#0b1220" opacity="0.7"/>
      <rect x="0" y="20" width="320" height="160" rx="16" fill="url(#card)" stroke="#334155" stroke-width="2"/>
      <text x="20" y="55" class="h">Browser Viewer</text>
      <text x="20" y="82" class="t">Three.js • WebGL</text>
      <text x="20" y="106" class="t">STLLoader • Scene/Camera/Lights</text>
      <rect x="20" y="125" width="150" height="26" rx="13" class="pill"/>
      <text x="34" y="143" class="sub">Offline (local server)</text>
    </g>
  </g>

  <!-- Connections -->
  <line x1="410" y1="245" x2="460" y2="245" class="line"/>
  <line x1="630" y1="360" x2="630" y2="410" class="line"/>
  <line x1="800" y1="245" x2="860" y2="245" class="line"/>
  <line x1="800" y1="485" x2="860" y2="485" class="line"/>
  <line x1="410" y1="520" x2="460" y2="520" class="line"/>

  <!-- Dashed "shared concept" line -->
  <line x1="250" y1="210" x2="1020" y2="520" class="line2"/>

  <text x="60" y="680" class="sub">Tip: keep assets in /assets (screens, SVGs, diagrams, GIFs) and link them directly from README for GitHub rendering consistency.</text>
</svg>
